If put into practice correctly, unit tests enable developers to proactively fix logic errors and teams to deliver the correct solution in a predictable and managed way. In this blog we'll discuss why unit tests are important and demonstrate techniques for writing them through a concrete example. Let's first define unit tests.

Unit tests are a specialized form of automated testing written by developers that verifies small isolated paths of logic work as intended by the developer.

Each unit test can be viewed simply as a developer "<a href="https://www.excella.com/insights/why-is-unit-testing-important">intention check</a>" which verifies that the unit of logic (usually a subroutine/function) is behaving as expected by the developer for a given scenario.

<b> Putting unit tests into practice correctly requires attention to each of the following areas:</b><ol><li><b>Requirements Gathering:</b> Developers must take their due diligence to confirm their understanding of requirements for how the system should work in each scenario they are testing.</li><li><b>Writing Clean and Testable Implementation:</b> Avoid modifying global state where possible; this makes code exceedingly difficult to test in isolation. See Misko Hevery's <a href="https://www.youtube.com/watch?v=RlfLCWKxHJ0"> Clean Code Talks </a>. </li><li><b>Consistency:</b> Developers must consistently write unit tests and understand their importance. </li><li><b>Simplicity:</b> Each test only covers one path through a logical unit in isolation. </li><li><b>Meaningful:</b> Each test must verify code in a specific scenario behaves as expected.</li><li><b>Wide-Ranging:</b> There needs to be enough tests to cover all possible success and failure scenarios.</li><li><b>Readable:</b> The tests need to follow a consistent pattern that is easily understood by other developers.</li><li><b>Automated:</b> The tests need to run periodically as new functionality is developed and released. </li></ol></p><div class="wp-block-image"><figure class="alignright"><img src="./SingleStone&#39;s Software Expertise_files/icon2.svg" alt="SIngleStone Software Solution" class="wp-image-59"></figure></div><p> When teams put this practice into place correctly, something magic happens. Let's discuss an example. </p> <h4>Unit Tests Keep Code Stable</h4><p> Say there are two developers, Martha and John, who are contracted to work on a customer facing application. Martha has worked on the project for several months and has implemented all of its functionality which is currently working in production. When her contract ends or she takes extended leave, John has to step in for her to continue where she left off. Assuming Martha had taken the time to unit test her code from every scenario, John may find himself breaking her tests at first. As he studies the failures one by one, he begins to understand not only Martha's intent but also subtle details, otherwise easily overlooked, which could make or break the system. As John learns and adjust his solutions as needed by the unit tests, he and his team can deploy their next release to production on time and with confidence that none of the pre-existing features will be broken. </p><h4>Unit Tests Promote Self Revision</h4><p> If John also makes the conscious effort of unit testing every scenario after his requirements gathering, he will find himself analyzing his logic from many different angles. As he thinks over the edge cases and how they will affect his logic, he will learn to expect the unexpected. This act of intentional self revision will enable him to root out design deficiencies, resolve logic errors, and find the simplest and most robust solutions. Assuming John's solutions pass user acceptance testing and meet requirements, his team can be extra confident that his work is robust and stable and will remain that way in future releases.</p><h4>Unit Tests Are What Developers Put Into Them</h4><p>The value of unit tests are purely what the developers put into them and it's important to point out that unit tests verify developer intent not system functionality. Can developers waste time and effort writing and testing code that wasn't even meeting specifications? Could a lot of money and time be wasted if unit tests aren't put into practice correctly? You bet, and sadly it probably happens more often than you think.</p><p> To avoid common pitfalls of uneffective unit testing, the most important thing for developers to remember is to keep the big picture in mind and not to fear coming to their team lead with questions about the requirements. Secondly, developers must be educated enough to put unit tests into practice correctly. As long as developers follow those guidelines, their <b>intent</b> and thus unit tests should be valid. It is also essential for developers and test/delivery leads to keep in mind having the right balance of other techniques such as <a href="https://martinfowler.com/bliki/IntegrationTest.html"> integration tests </a> and <a href="https://www.softwaretestinghelp.com/what-is-end-to-end-testing/"> user acceptance tests </a> to help validate requirements. </p><h4>Unit Testing Walkthrough</h4><p>Now let's begin going over a concrete example of how unit tests can be put to use by developers. While this concrete example will involve walking through a Java project, the concepts will be explained such that the ideas can be translated to any other programming language. For more details about unit testing techniques I strongly recommend the book <a href="http://xunitpatterns.com/index.html">XUnit Test Patterns: Refactoring Test Code</a>. Since unit tests must trace back to requirements, lets start with listing out the requirements for our concrete example, a simple customer lookup API. Let's say that we have a retail store which wants to start auditing purchases and decides to hire your team to quickly roll out an API that must meet the below requirements for all new purchases.</p><b>Below is the specification of what the API must support through its endpoints:</b><ol><li>Storage and retrieval of each customer purchase. </li><li>Retrieve full list of customers</li><li>Retrieve purchase history for a customer ranked by amount spent</li><li>Retrieve total amount spent by a customer.</li></ol> <br><p>  The scenarios covered in this blog involve the implementation and unit tests for making a purchase. </p>

    <!-- BEGIN SOURCE CODE BLOCK -->
<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em; font-size: 15px"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">@PostMapping</span><span style="color: #f92672">(</span><span style="color: #e6db74">&quot;/purchase&quot;</span><span style="color: #f92672">)</span>
<span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #a6e22e">purchase</span><span style="color: #f92672">(</span><span style="color: #66d9ef">final</span> <span style="color: #a6e22e">@RequestBody</span> <span style="color: #f8f8f2">InboundPurchaseRecordDTO</span> <span style="color: #f8f8f2">purchaseRecordDTO</span><span style="color: #f92672">)</span> <span style="color: #f92672">{</span>
    <span style="color: #66d9ef">if</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordDTO</span><span style="color: #f92672">.</span><span style="color: #a6e22e">getCustomerID</span><span style="color: #f92672">()).</span><span style="color: #a6e22e">isEmpty</span><span style="color: #f92672">())</span> <span style="color: #f92672">{</span>
        <span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Customer</span><span style="color: #f92672">().</span><span style="color: #a6e22e">setCustomerID</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordDTO</span><span style="color: #f92672">.</span><span style="color: #a6e22e">getCustomerID</span><span style="color: #f92672">()));</span>
    <span style="color: #f92672">}</span>
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordDTO</span><span style="color: #f92672">));</span>
<span style="color: #f92672">}</span>
</pre></td></tr></table></div>

    <!-- END SOURCE CODE BLOCK -->
    <br>
    <p> To summarize, we have an endpoint that takes a customer purchase as input, saves that customer <i>if</i> it is their initial purchase, and then saves and returns back the purchase. </p> <p>Note that in the above method, given the single <i>if</i> statement, there are two possible "happy path" branches to be tested: the successful initial purchase and the successful subsequent purchase. While in a real application we will want to also consider and test the failure scenarios by providing the possible invalid inputs, we will leave those out here for the sake of conciseness. </p><p> Let's start with the initial successful purchase scenario. When we look closely we notice that the function we are testing which we will call <a href="http://xunitpatterns.com/SUT.html">SUT</a> (System Under Test) really doesn't do much itself, it is mostly delegating responsibilities to its dependencies and passing inputs and outputs around to their functions. By delegating in this way, the implementation is leveraging the concept of software reuse and allows the code to be very concise and readable. In order to test such code in isolation, we need to think about how we are expecting it to interact with the dependencies it performs the delegation on. Lets break down what behavior is expected to happen when a customer makes a successful initial purchase:</p><b>Expected Behavior</b><ol type="A"><li><b>The correct input is provided to the SUT </b><ol><li>The method is provided with an object of type InboundPurchaseRecordDTO as an input (line 2).</li></ol></li><li><b>The customer is saved to the database:</b><ol><li>The CustomerRepository dependency's findById method takes the customer id from the InboundPurchaseRecordDTO input and returns an empty value (line 3).</li><li>The CustomerRepository save method saves the provided customer id into a table (line 4).</li></ol></li><li><b>The purchase is saved to the database</b><ol><li>The DtoMapper dependency's toPurchaseRecord method translates the input into a database object (line 6).</li><li>The database object is passed into the PurchaseRecordRepository save method and returned by it (also line 6).</li></ol></li><li><b>The correct output is provided by the SUT</b><ol><li>The function exits returning the output of the save method (also line 6).</li></ol></li></ol><p><br>We will refer back to the above behavior summary later as we cover the setup and verification steps of our unit test, but for now lets start with a high level overview of how these tests are written. For the unit tests we use the <a href="http://xunitpatterns.com/JUnit.html">JUnit Automated Test Framework </a> and follow the <a href="http://xunitpatterns.com/Creation%20Method.html#Anonymous%20Creation%20Method"> Fresh Fixture Setup Pattern </a> which involves re-initializing the SUT during the beginning of each individual test. This pattern is recommended because it prevents state changes from leaking from one test to another thus promoting predictable behavior between test runs, and promotes readability. Each test that is run has <a href="http://xunitpatterns.com/Four%20Phase%20Test.html">four phases</a>: setup, exercise, verify, and teardown.</p><p>Below is the full unit test that was written for the customer's initial purchase: </p>
    <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;font-size: 15px"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">@Test</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">customerInitialPurchaseSuccessful</span><span style="color: #f92672">()</span> <span style="color: #f92672">{</span>
    <span style="color: #75715e">/**</span>
<span style="color: #75715e">    * Setup</span>
<span style="color: #75715e">    */</span>
    <span style="color: #75715e">// stub the customer lookup to simulate non existing customer</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Optional</span><span style="color: #f92672">.</span><span style="color: #a6e22e">empty</span><span style="color: #f92672">());</span>

    <span style="color: #75715e">// create the expected customer to be saved</span>
    <span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">Customer</span> <span style="color: #f8f8f2">expectedSavedCustomer</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Customer</span><span style="color: #f92672">().</span><span style="color: #a6e22e">setCustomerID</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">// stub the dto mapper operation return the expect result</span>
    <span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #f8f8f2">expectedResult</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">PurchaseRecord</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">// stub the save operation to save successfully returning saved result</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">/**</span>
<span style="color: #75715e">     * Exercise</span>
<span style="color: #75715e">     */</span>
    <span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #f8f8f2">actualResult</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">systemUnderTest</span><span style="color: #f92672">.</span><span style="color: #a6e22e">purchase</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">/**</span>
<span style="color: #75715e">     * Verify</span>
<span style="color: #75715e">     */</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedSavedCustomer</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Assertions</span><span style="color: #f92672">.</span><span style="color: #a6e22e">assertTrue</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span> <span style="color: #f92672">==</span> <span style="color: #f8f8f2">actualResult</span><span style="color: #f92672">,</span> <span style="color: #e6db74">&quot;The returned result does not match the expected result&quot;</span><span style="color: #f92672">);</span>
<span style="color: #f92672">}</span>
</pre></td></tr></table></div>

    <!-- END SOURCE CODE BLOCK -->
<br>
    <p> Note that the method for the above unit test is named based on a concise description of the scenario we are testing (customerInitialPurchaseSuccessful). Above, the "Setup", "Exercise", and "Verify" sections of the code are denoted by their respective comments. Also note that the "Teardown" section is omitted in this case since the Java language includes a <a href="http://xunitpatterns.com/Garbage-Collected%20Teardown.html">garbage collector</a> which implicitly handles this step by removing all objects in the method as they go out of scope. Each step of the unit test aside from "Teardown" is covered below in more detail:</p>
    <h4>Setup</h4><p> The setup section of a unit test is needed to (1) instantiate the SUT and (2) put in place the <a href="http://xunitpatterns.com/indirect%20input.html">indirect inputs</a>  necessary for the correct scenario to be exercised. We will first discuss the object instantiation then cover the indirect inputs. Since all tests will require the tested SUT's object instantiation, we have moved the logic into a function annotated with @BeforeEach which informs JUnit to run this function before each test. In this setup step we invoke the tested object's constructor by passing mocks of each dependency (line 8 below). These mock versions of the dependencies are created using the  <a href="https://site.mockito.org/">Mockito Framework</a> which helps us to create our indirect inputs and subsequently verify the correct behavior in our SUT.</p>

    <!-- BEGIN SOURCE CODE BLOCK -->
    <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em; font-size: 15px"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">@BeforeEach</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">setup</span><span style="color: #f92672">()</span> <span style="color: #f92672">{</span>
    <span style="color: #f8f8f2">purchaseRecordRepository</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">PurchaseRecordRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">storeItemRepository</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">StoreItemRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">customerRepository</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">CustomerRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">dtoMapper</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DtoMapper</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>

    <span style="color: #f8f8f2">systemUnderTest</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">StoreInventoryController</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">,</span>
            <span style="color: #f8f8f2">storeItemRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">);</span>

    <span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">initialize</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">storeItemRepository</span><span style="color: #f92672">);</span>
<span style="color: #f92672">}</span>
</pre></td></tr></table></div>


    <!-- END SOURCE CODE BLOCK -->

    <br>
    <p> With the SUT instantiated as shown above, we are now in a position where we can test the initial purchase in isolation by stubbing the behaviors of the mocks as shown in the Setup section of the unit test below: </p>

    <!-- BEGIN SOURCE CODE BLOCK -->
    <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;font-size:15px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">/**</span>
<span style="color: #75715e">* Setup</span>
<span style="color: #75715e">*/</span>
<span style="color: #75715e">// stub the customer lookup to simulate non existing customer</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Optional</span><span style="color: #f92672">.</span><span style="color: #a6e22e">empty</span><span style="color: #f92672">());</span>

<span style="color: #75715e">// create the expected customer to be saved</span>
<span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">Customer</span> <span style="color: #f8f8f2">expectedSavedCustomer</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Customer</span><span style="color: #f92672">().</span><span style="color: #a6e22e">setCustomerID</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">);</span>

<span style="color: #75715e">// stub the dto mapper operation return the expect result</span>
<span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #f8f8f2">expectedResult</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">PurchaseRecord</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>

<span style="color: #75715e">// stub the save operation to save successfully returning saved result</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>
</pre></td></tr></table></div>


    <!-- END SOURCE CODE BLOCK-->

    <br>
    By manipulating the behavior of the dependency mocks as shown above we can set up our test to run through the correct branch in a controlled manner. For this example each indirect input is declared using the Mockito Framework's ".when()" and ".thenReturn()" statements, thus there are the following three declared in the code above.<br><br><b>Indirect Inputs:</b><ul><li><b>Enable the customer to be saved to our database </b><ol><li>Line 5: <i>When</i> the CustomerRepository dependency findByID method is provided with the customer id, <i>then</i> it returns an empty response as an indirect input to the SUT.</li></ol></li><li><b>Enable the purchase to be saved to our database</b><ol><li>Line 12: <i>When</i> the DtoMapper dependency's toPurchaseRecord() method is given the purchase input, <i>then</i> it returns back the database record as an indirect input to the SUT.</li></ol></li><li><b>Enable the SUT to return the database record</b><ol><li>Line 15: <i>When</i> the PurchaseRecordRepository save method is given the database record, <i>then</i> the database record is returned back as an indirect input to the SUT.</li></ol></li></ul> Now let's cover what happens when the tested method is exercised with these indirect inputs in place. </p><h4>Exercise</h4><p>Now, when the purchase method is exercised as shown below, </p>

    <!-- BEGIN SOURCE CODE BLOCK -->
        <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;font-size:15px"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">/**</span>
<span style="color: #75715e"> * Exercise</span>
<span style="color: #75715e"> */</span>
<span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #f8f8f2">actualResult</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">systemUnderTest</span><span style="color: #f92672">.</span><span style="color: #a6e22e">purchase</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">);</span>
</pre></td></tr></table></div>

    <!-- END SOURCE CODE BLOCK -->

<br>
    <p>we can verify that the correct path of code was executed or not. We can do so by running the test and leveraging our <a href="https://docs.gradle.org/current/userguide/jacoco_plugin.html">code coverage tool</a> whose output is illustrated below.</p>
    <br>
    <img src="./SingleStone&#39;s Software Expertise_files/initialpurchasecoverage.png" width="100%" style="border-width:50x;border-style:solid">
    <br><br>
    <p>Notice that the path we are executing in our test is green, the yellow shows that only 1 of 2 branches in the if statement have been run so far, the red shows paths that have not been tested.</p><h4>Verify:</h4><p>While the code coverage tool does confirm that the code path of the scenario is run, it cannot confirm the <b>Expected Behavior</b> defined above actually occurred. As mentioned previously there is not a lot the code we are testing does, it is only delegating the responsibilities of database storage/retrieval and translation to its dependencies. The purpose of the verification step is to ensure that the SUT performed this delegation correctly and provided the expected outcomes. The purpose of the verification section of the unit test is to ensure that, when exercised with the indirect inputs specified during setup, the SUT will behave as expected. In this case, what we need to verify is that (1) the customer record is saved (2) the purchase record is saved (3) the saved purchase is returned by the SUT. Using the Mockito "verify" method we ensure all of the behavior occurred as expected as demonstrated below: </p>


    <!-- BEGIN SOURCE CODE BLOCK -->
    <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;font-size: 15px;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7
8</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">/**</span>
<span style="color: #75715e">* Verify</span>
<span style="color: #75715e">*/</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedSavedCustomer</span><span style="color: #f92672">);</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">);</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">);</span>
<span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>
<span style="color: #f8f8f2">Assertions</span><span style="color: #f92672">.</span><span style="color: #a6e22e">assertTrue</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span> <span style="color: #f92672">==</span> <span style="color: #f8f8f2">actualResult</span><span style="color: #f92672">,</span> <span style="color: #e6db74">&quot;The returned result does not match the expected result&quot;</span><span style="color: #f92672">);</span>
</pre></td></tr></table></div>
<!-- END SOURCE CODE BLOCK -->
    <br><p>Since, as mentioned earlier, the SUT just passes this object around we don't need to verify the contents of the result in this test. However, we do need to verify that the method delegated responsibilities correctly as seen in the above code. </p>
    <b>We can summarize the above code as follows:</b><ul><li><b>The customer is saved</b><ol><li>Line 4: Make sure the SUT called the <i>CustomerRepository</i> object's <i>save</i> method <i>once</i> and provided the correct object (Mockito verifies arguments with a deep equality check).</li><li>Line 5: Make sure the SUT attempted to look up the customer using the <i>CustomerRepository</i> object's <i>findById</i> method <i>once</i> and was provided with the correct id. </li></ol><li><b>The purchase is saved</b><ol><li>Line 6: Make sure that the SUT delegated the translation of the purchase from input to database format correctly by using the <i>DtoMapper</i> object's <i>toPurchaseRecord</i> method <i>once</i> and provided the correct purchase input as an argument.</li><li>Line 7: Make sure the SUT took the translated purchase record and saved it to the database by calling the <i>PurchaseRecordRepository</i> object's <i>save</i> method <i>once</i> and providing the correct purchase record as the argument</li></ol><li><b>The saved purchase is returned by the SUT</b><ol><li>Line 8: Using the JUnit <i>assertTrue</i> method make sure correct argument was returned by using a shallow equality check (shallow since contents of what is returned relies on the dependencies which are not tested here).</li></ol></ul>

    <h4>Testing Subsequent Purchase Scenario</h4><p>Testing the second scenario, successful subsequent purchase, only requires some slight alterations to the previous test. Namely, the CustomerRepository findById() method must now return a non-empty record and we must verify that the customer record is now not saved as shown below: </p>

    <!-- BEGIN SOURCE CODE BLOCK -->
    <!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;font-size: 15px"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #a6e22e">@Test</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">customerSubsequentPurchaseSuccessful</span><span style="color: #f92672">()</span> <span style="color: #f92672">{</span>
    <span style="color: #75715e">/**</span>
<span style="color: #75715e">     * Setup</span>
<span style="color: #75715e">     */</span>
    <span style="color: #75715e">// stub the customer lookup to simulate existing customer</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Optional</span><span style="color: #f92672">.</span><span style="color: #a6e22e">of</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomer</span><span style="color: #f92672">));</span>

    <span style="color: #75715e">// stub the dto mapper operation to return the expected result</span>
    <span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #f8f8f2">expectedResult</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">mock</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">PurchaseRecord</span><span style="color: #f92672">.</span><span style="color: #a6e22e">class</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">.</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">// stub the save operation to save successfully returning the saved result</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">when</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">.</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">thenReturn</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">/**</span>
<span style="color: #75715e">     * Exercise</span>
<span style="color: #75715e">     */</span>
    <span style="color: #66d9ef">final</span> <span style="color: #f8f8f2">PurchaseRecord</span> <span style="color: #f8f8f2">actualResult</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">systemUnderTest</span><span style="color: #f92672">.</span><span style="color: #a6e22e">purchase</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">);</span>

    <span style="color: #75715e">/**</span>
<span style="color: #75715e">     * Verify</span>
<span style="color: #75715e">     */</span>
    <span style="color: #f8f8f2">Assertions</span><span style="color: #f92672">.</span><span style="color: #a6e22e">assertTrue</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span> <span style="color: #f92672">==</span> <span style="color: #f8f8f2">actualResult</span><span style="color: #f92672">,</span> <span style="color: #e6db74">&quot;The returned result does not match the expected result&quot;</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">purchaseRecordRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">expectedResult</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">findById</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultCustomerID1</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">dtoMapper</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">times</span><span style="color: #f92672">(</span><span style="color: #ae81ff">1</span><span style="color: #f92672">)).</span><span style="color: #a6e22e">toPurchaseRecord</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">DefaultStoreValues</span><span style="color: #f92672">.</span><span style="color: #a6e22e">defaultInboundCustomerPurchase</span><span style="color: #f92672">);</span>
    <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">verify</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">customerRepository</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">never</span><span style="color: #f92672">()).</span><span style="color: #a6e22e">save</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">Mockito</span><span style="color: #f92672">.</span><span style="color: #a6e22e">any</span><span style="color: #f92672">());</span>
<span style="color: #f92672">}</span>
</pre></td></tr></table></div>

    <!-- END SOURCE CODE BLOCK -->
    <br>
    <p> Now when we run the test, the code coverage tool reveals that we have completely covered all paths of this function as shown below: </p>
    <p><img src="./SingleStone&#39;s Software Expertise_files/1.2coverage.png" width="100%" style="border-width:50x;border-style:solid"></p>
    <p>We can make sure the verification is correct in both of these scenarios by purposefully breaking some of the functionality in the implementation and ensuring the unit test now breaks where it didn't before. These tests will not only help us verify our code works as expected during development to resolve bugs early, but they may also prevent future developers from modifying this expected behavior later on without first thinking more in depth about the impacts to the current features.</p><h4>Conclusion:</h4><p>In this blog we've discussed the importance, positive outcomes, and potential pitfalls of unit testing and demonstrated techniques teams can use for writing effective unit tests through a concrete example. Let's review some important takeaways.<ol><li><b>Unit tests only verify developer intent:</b> While unit tests are useful, requirements must be verified with other forms of testing (e.g. functional and performance tests).</li><li><b>Training is key:</b> Teams need developers with the education and discipline needed to consistently write effective unit tests.</li><li><b>Requirements Gathering:</b> Developers must gather requirements early on and throughout development to ensure they are on the right track in their code and tests, otherwise the tests and code may be a waste of time and effort. </li></ol></p><p>In conclusion, teams who write unit tests that matter will see more robust and self revised code being released as well as a boost in predictable and consistent behavior between releases regardless of staffing changes. </p> <h4>Feedback and Suggestions:</h4> <p>One of the positive outcomes for the developers who write unit tests effectively is that the process often reveals simpler and better solutions. Has writing unit tests ever changed your view of a challenging problem? Have unit tests helped keep your team in line with its goals? Have you experienced one of the pitfalls of uneffective unit testing practices? Let us know your thoughts in the comments section. For the complete source code of the above example project, visit the <a href="https://github.com/jrbruce86/singlestone-unittest-blog">github</a> page. </p><div id="author-box" class="section"><div class="container container-medium"><div class="row"><div class="col-sm-3"> <!--<img src="./SingleStone&#39;s Software Expertise_files/Hollins_Gray_Head-Crop-660x660.jpg" width="250" height="250" alt="Gray Hollins" class="avatar avatar-250 wp-user-avatar wp-user-avatar-250 alignnone photo">--></div><div class="col-sm-9"><h3 class="author-box-name"> Jake Bruce </h3><ul class="social-list list-inline author-social"></ul><p></p><div class="author-contacts"><p><a class="btn btn-sm btn-secondary" href="mailto:jbruce@singlestoneconsulting.com"> Contact Me</a> <a class="btn btn-sm btn-primary" href="https://www.singlestoneconsulting.com/blog/author/jbruce/"> View My Posts </a></p></div></div></div></div></div><div class="container container-medium"><div class="comments-area" id="comments"><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://www.singlestoneconsulting.com/blog/software/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://www.singlestoneconsulting.com/wp-comments-post.php?wpe-comment-post=singlestone" method="post" id="commentform" class="comment-form" novalidate=""><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><div class="form-group comment-form-comment"><textarea class="form-control" id="comment" name="comment" placeholder="Comment" aria-required="true" cols="45" rows="8"></textarea></div><div class="form-group comment-form-author"><input class="form-control" id="author" name="author" type="text" placeholder="Your name" value="" size="30" aria-required="true"></div><div class="form-group comment-form-email"><input class="form-control" id="email" placeholder="Email address" name="email" type="email" value="" size="30" aria-required="true"></div><p class="form-submit"><input name="submit" type="submit" id="submit" class="btn btn-secondary" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="196" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"></p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="f3871fb9a7"></p><p style="display: none;"></p><input type="hidden" id="ak_js" name="ak_js" value="1576861026241"></form></div></div></div></section><section id="related-posts" class="section waves-combo"><div class="container container-medium"><header class="section-header"><h2>Related Insights</h2></header><div class="card-deck"><article class="blog-card card aos-init" id="post-259" data-aos="fade-up"><div class="card-body"> <a href="https://www.singlestoneconsulting.com/blog/culture-shock-build-a-great-place-to-work/" class="card-link" aria-label="Culture Shock: 5 Simple Steps to Building a Great Place to Work."></a><h3 class="entry-title"> <a href="https://www.singlestoneconsulting.com/blog/culture-shock-build-a-great-place-to-work/" title="Culture Shock: 5 Simple Steps to Building a Great Place to Work." rel="bookmark">Culture Shock: 5 Simple Steps to Building a Great Place to Work.</a></h3> <span class="author-name">by <a class="url fn n" href="https://www.singlestoneconsulting.com/blog/author/trhodes/"> Tricia Rhodes</a></span><hr><div class="entry-excerpt-wrapper"><div class="entry-excerpt"><p>A great company culture starts with authenticity and personal relationships. Tear down the cubicles, buy a treadmill desk, ask your CEO to wear jeans and there you have</p></div></div></div><div class="card-footer"> <a class="btn btn-sm btn-secondary read-more-link" href="https://www.singlestoneconsulting.com/blog/culture-shock-build-a-great-place-to-work/" title="Culture Shock: 5 Simple Steps to Building a Great Place to Work." rel="bookmark"> Read More </a></div></article><article class="blog-card card aos-init" id="post-201" data-aos="fade-up"><div class="card-body"> <a href="https://www.singlestoneconsulting.com/blog/evolution/" class="card-link" aria-label="SingleStones Evolution"></a><h3 class="entry-title"> <a href="https://www.singlestoneconsulting.com/blog/evolution/" title="SingleStones Evolution" rel="bookmark">SingleStones Evolution</a></h3> <span class="author-name">by <a class="url fn n" href="https://www.singlestoneconsulting.com/blog/author/jchou/"> Jimmy Chou</a></span><hr><div class="entry-excerpt-wrapper"><div class="entry-excerpt"><p>In 2006, I joined SingleStone with one simple goal: demonstrate how consulting can be done differently. I have always loved solving problems across organizations, from my early career</p></div></div></div><div class="card-footer"> <a class="btn btn-sm btn-secondary read-more-link" href="https://www.singlestoneconsulting.com/blog/evolution/" title="SingleStones Evolution" rel="bookmark"> Read More </a></div></article><article class="blog-card card aos-init" id="post-188" data-aos="fade-up"><div class="card-body"> <a href="https://www.singlestoneconsulting.com/blog/product-teaminsights/" class="card-link" aria-label="SingleStones Product Expertise"></a><h3 class="entry-title"> <a href="https://www.singlestoneconsulting.com/blog/product-teaminsights/" title="SingleStones Product Expertise" rel="bookmark">SingleStones Product Expertise</a></h3> <span class="author-name">by <a class="url fn n" href="https://www.singlestoneconsulting.com/blog/author/pnichols/"> Prescott Nichols</a></span><hr><div class="entry-excerpt-wrapper"><div class="entry-excerpt"><p>We live in a world of immediacy.&nbsp;&nbsp;Do you want a very-berry&nbsp;peanut butter smoothie?&nbsp;&nbsp;Just click yes on your favorite mobile app, and it will be at your doorstep in</p></div></div></div><div class="card-footer"> <a class="btn btn-sm btn-secondary read-more-link" href="https://www.singlestoneconsulting.com/blog/product-teaminsights/" title="SingleStones Product Expertise" rel="bookmark"> Read More </a></div></article></div></div></section></main><footer id="siteFooter" class="section text-white"><div class="container"><div class="row"><div class="col-md-4 footer-col"><div id="footerNav" class="footernav"><ul id="footer-menu" class="navbar-nav"><li id="menu-item-50" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-50"><a href="https://www.singlestoneconsulting.com/">Home</a></li><li id="menu-item-115" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-115"><a href="https://www.singlestoneconsulting.com/careers/">Careers</a></li><li id="menu-item-52" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-52"><a href="https://www.singlestoneconsulting.com/ripple/">Blog</a></li><li id="menu-item-53" class="popcontact menu-item menu-item-type-custom menu-item-object-custom menu-item-53"><a href="https://www.singlestoneconsulting.com/blog/software/#">Contact</a></li></ul></div></div><div class="col-md-4 footer-col text-center"> <a class="footer-phone" href="tel:(877) 334-4266" itemprop="telephone">(877) 334-4266</a><a class="footer-email" href="mailto:(877)%20334-4266" itemprop="email">info@singlestoneconsulting.com</a><p class="footer-address" href="tel:(877) 334-4266" itemprop="address">4101 Cox Road, Suite 350 <br> Glen Allen, Virginia 23060</p></div><div class="col-md-4 footer-col footer-social" itemscope="" itemtype="http://schema.org/Organization"><ul class="social-list list-inline"><li class="list-inline-item"> <a target="_blank" title="Follow us on Twitter" aria-label="Follow us on Twitter" href="https://twitter.com/SingleStoneTech"> <i class="fab fa-twitter" aria-hidden="true"></i> </a></li><li class="list-inline-item"> <a target="_blank" title="Follow us on Facebook" aria-label="Follow us on Facebook" href="https://www.facebook.com/SingleStoneTech"> <i class="fab fa-facebook-f" aria-hidden="true"></i> </a></li><li class="list-inline-item"> <a target="_blank" title="Follow us on LinkedIn" aria-label="Follow us on LinkedIn" href="https://www.linkedin.com/company/singlestone"> <i class="fab fa-linkedin-in" aria-hidden="true"></i></a></li></ul></div></div><div class="footer-legal"><p class="small" style="text-align: center;"> SingleStone 2019. All Rights Reserved. <a href="http://singlestone.wpengine.com/privacy-policy/">Privacy/Legal</a>.</p><p style="text-align: center;">Looking for CRM, CCM, CMS services? Visit <a href="https://www.waypathconsulting.com/">WayPath</a>, a SingleStone Company.</p></div></div></footer><div class="modal fade" id="contact-popup" tabindex="-1" role="dialog" aria-labelledby="popcontact" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true"></span> </button><div class="modal-body"><div class="gf_browser_chrome gform_wrapper" id="gform_wrapper_1"><div id="gf_1" class="gform_anchor" tabindex="-1"></div><form method="post" enctype="multipart/form-data" target="gform_ajax_frame_1" id="gform_1" action="https://www.singlestoneconsulting.com/blog/software/#gf_1"><div class="gform_heading"><h3 class="gform_title">Get in touch.</h3></div><div class="gform_body"><ul id="gform_fields_1" class="gform_fields top_label form_sublabel_below description_below"><li id="field_1_1" class="gfield gfield_contains_required field_sublabel_below field_description_below hidden_label gfield_visibility_visible"><label class="gfield_label" for="input_1_1">Email address<span class="gfield_required">*</span></label><div class="ginput_container ginput_container_email"> <input name="input_1" id="input_1_1" type="email" value="" class="large" tabindex="12" placeholder="Email address" aria-required="true" aria-invalid="false"></div></li><li id="field_1_2" class="gfield gfield_contains_required field_sublabel_below field_description_below hidden_label gfield_visibility_visible"><label class="gfield_label" for="input_1_2">Your message<span class="gfield_required">*</span></label><div class="ginput_container ginput_container_textarea"><textarea name="input_2" id="input_1_2" class="textarea medium" tabindex="13" placeholder="Your message" aria-required="true" aria-invalid="false" rows="10" cols="50"></textarea></div></li><li id="field_1_3" class="gfield gform_validation_container field_sublabel_below field_description_below gfield_visibility_visible"><label class="gfield_label" for="input_1_3">Comments</label><div class="ginput_container"><input name="input_3" id="input_1_3" type="text" value="" autocomplete="off"></div><div class="gfield_description" id="gfield_description__3">This field is for validation purposes and should be left unchanged.</div></li></ul></div><div class="gform_footer top_label"> <button type="submit" onclick="if(window[&quot;gf_submitting_1&quot;]){return false;}  if( !jQuery(&quot;#gform_1&quot;)[0].checkValidity || jQuery(&quot;#gform_1&quot;)[0].checkValidity()){window[&quot;gf_submitting_1&quot;]=true;}  " onkeypress="if( event.keyCode == 13 ){ if(window[&quot;gf_submitting_1&quot;]){return false;} if( !jQuery(&quot;#gform_1&quot;)[0].checkValidity || jQuery(&quot;#gform_1&quot;)[0].checkValidity()){window[&quot;gf_submitting_1&quot;]=true;}  jQuery(&quot;#gform_1&quot;).trigger(&quot;submit&quot;,[true]); }" id="gform_submit_button_1" class="gform_button button">Send</button> <input type="hidden" name="gform_ajax" value="form_id=1&amp;title=1&amp;description=&amp;tabindex=12"> <input type="hidden" class="gform_hidden" name="is_submit_1" value="1"> <input type="hidden" class="gform_hidden" name="gform_submit" value="1"> <input type="hidden" class="gform_hidden" name="gform_unique_id" value=""> <input type="hidden" class="gform_hidden" name="state_1" value="WyJbXSIsIjBmYmQ4OWEzMTRkYTFmOGQ2OGFlMjVhMjIzNmNhZGZhIl0="> <input type="hidden" class="gform_hidden" name="gform_target_page_number_1" id="gform_target_page_number_1" value="0"> <input type="hidden" class="gform_hidden" name="gform_source_page_number_1" id="gform_source_page_number_1" value="1"> <input type="hidden" name="gform_field_values" value=""></div></form></div> <iframe style="display:none;width:0px;height:0px;" src="./SingleStone&#39;s Software Expertise_files/saved_resource.html" name="gform_ajax_frame_1" id="gform_ajax_frame_1" title="Ajax Frame">This iframe contains the logic required to handle Ajax powered Gravity Forms.</iframe> <script type="text/javascript">jQuery(document).ready(function($){gformInitSpinner( 1, 'https://www.singlestoneconsulting.com/wp-content/plugins/gravityforms/images/spinner.gif' );jQuery('#gform_ajax_frame_1').on('load',function(){var contents = jQuery(this).contents().find('*').html();var is_postback = contents.indexOf('GF_AJAX_POSTBACK') >= 0;if(!is_postback){return;}var form_content = jQuery(this).contents().find('#gform_wrapper_1');var is_confirmation = jQuery(this).contents().find('#gform_confirmation_wrapper_1').length > 0;var is_redirect = contents.indexOf('gformRedirect(){') >= 0;var is_form = form_content.length > 0 && ! is_redirect && ! is_confirmation;var mt = parseInt(jQuery('html').css('margin-top'), 10) + parseInt(jQuery('body').css('margin-top'), 10) + 100;if(is_form){jQuery('#gform_wrapper_1').html(form_content.html());if(form_content.hasClass('gform_validation_error')){jQuery('#gform_wrapper_1').addClass('gform_validation_error');} else {jQuery('#gform_wrapper_1').removeClass('gform_validation_error');}setTimeout( function() { /* delay the scroll by 50 milliseconds to fix a bug in chrome */ jQuery(document).scrollTop(jQuery('#gform_wrapper_1').offset().top - mt); }, 50 );if(window['gformInitDatepicker']) {gformInitDatepicker();}if(window['gformInitPriceFields']) {gformInitPriceFields();}var current_page = jQuery('#gform_source_page_number_1').val();gformInitSpinner( 1, 'https://www.singlestoneconsulting.com/wp-content/plugins/gravityforms/images/spinner.gif' );jQuery(document).trigger('gform_page_loaded', [1, current_page]);window['gf_submitting_1'] = false;}else if(!is_redirect){var confirmation_content = jQuery(this).contents().find('.GF_AJAX_POSTBACK').html();if(!confirmation_content){confirmation_content = contents;}setTimeout(function(){jQuery('#gform_wrapper_1').replaceWith(confirmation_content);jQuery(document).scrollTop(jQuery('#gf_1').offset().top - mt);jQuery(document).trigger('gform_confirmation_loaded', [1]);window['gf_submitting_1'] = false;}, 50);}else{jQuery('#gform_1').append(contents);if(window['gformRedirect']) {gformRedirect();}}jQuery(document).trigger('gform_post_render', [1, current_page]);} );} );</script><script type="text/javascript">jQuery(document).bind('gform_post_render', function(event, formId, currentPage){if(formId == 1) {if(typeof Placeholders != 'undefined'){
                        Placeholders.enable();
                    }} } );jQuery(document).bind('gform_post_conditional_logic', function(event, formId, fields, isInit){} );</script><script type="text/javascript">jQuery(document).ready(function(){jQuery(document).trigger('gform_post_render', [1, 1]) } );</script> </div><div class="modal-footer"><div class="container"><h4 itemprop="address">4101 Cox Road, Suite 350 <br> Glen Allen, Virginia 23060</h4><h4><a class="footer-phone" href="tel:(877) 334-4266" itemprop="telephone">(877) 334-4266</a></h4></div></div></div></div></div> <span class="breakpoint-tester"></span> <script type="text/javascript" src="./SingleStone&#39;s Software Expertise_files/isotope.pkgd.min.js"></script> <script type="text/javascript" src="./SingleStone&#39;s Software Expertise_files/jquery.matchHeight-min.js"></script> <script type="text/javascript">var gf_global = {"gf_currency_config":{"name":"U.S. Dollar","symbol_left":"$","symbol_right":"","symbol_padding":"","thousand_separator":",","decimal_separator":".","decimals":2},"base_url":"https:\/\/www.singlestoneconsulting.com\/wp-content\/plugins\/gravityforms","number_formats":[],"spinnerUrl":"https:\/\/www.singlestoneconsulting.com\/wp-content\/plugins\/gravityforms\/images\/spinner.gif"};</script> <script type="text/javascript" defer="" src="./SingleStone&#39;s Software Expertise_files/autoptimize_9ba77632ace0c896813232d3654f0f54.js"></script></div><div id="wp-a11y-speak-polite" aria-live="polite" aria-relevant="additions text" aria-atomic="true" class="screen-reader-text wp-a11y-speak-region"></div><div id="wp-a11y-speak-assertive" aria-live="assertive" aria-relevant="additions text" aria-atomic="true" class="screen-reader-text wp-a11y-speak-region"></div><script type="text/javascript" id="gtm-scroll-tracking">(function(b,g,a){function l(){if(!b.querySelector||!b.body.getBoundingClientRect)return!1;a.dataLayerName=a.dataLayerName||"dataLayer";a.distances=a.distances||{};p();n(g,"scroll",v(p,500))}function q(e,f,c,d,a){var k;for(k=0;k<f.length;k++){var b=parseInt(f[k],10),h="%"!==c?b+a:b/100*d+a;b+=c;h<=d+a&&(e[b]=h)}return e}function r(e,a){var c=parseInt(e,10),d=a/c,f=[],b;for(b=1;b<d+1;b++)f.push(b*c);return f}function p(){var e=t(a.bottom),f=t(a.top),c=b.body,d=b.documentElement;c=Math.max(c.scrollHeight,
c.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight);f&&(c-=f);e&&(c=e-(f||0));e=c-5;f=f||0;c={};d=[];var h=[];if(a.distances.percentages&&(a.distances.percentages.each&&(d=d.concat(a.distances.percentages.each)),a.distances.percentages.every)){var k=r(a.distances.percentages.every,100);d=d.concat(k)}a.distances.pixels&&(a.distances.pixels.each&&(h=h.concat(a.distances.pixels.each)),a.distances.pixels.every&&(k=r(a.distances.pixels.every,e),h=h.concat(k)));c=q(c,d,"%",e,f);e=c=q(c,h,"px",
e,f);f=void 0!==g.pageXOffset;c="CSS1Compat"===(b.compatMode||"");f=f?g.pageYOffset:c?b.documentElement.scrollTop:b.body.scrollTop;f=parseInt(f,10);c=parseInt;d="CSS1Compat"===b.compatMode?b.documentElement:b.body;d=d.clientHeight;f+=c(d,10);for(var m in e)if(f>e[m]&&!u[m])if(u[m]=!0,c=m,d=g.GoogleAnalyticsObject,"undefined"===typeof g[a.dataLayerName]||a.forceSyntax)if("function"===typeof g[d]&&"function"===typeof g[d].getAll&&2!==a.forceSyntax)g[d]("send","event",a.category,c,a.label,{nonInteraction:1});
else"undefined"!==typeof g._gaq&&1!==a.forceSyntax&&g._gaq.push(["_trackEvent",a.category,c,a.label,0,!0]);else g[a.dataLayerName].push({event:"scrollTracking",attributes:{distance:c,label:a.label}})}function t(e){if("number"===typeof e||parseInt(e,10))return parseInt(e,10);try{var a=1===e.nodeType?e:b.querySelector(e),c=b.body.getBoundingClientRect().top,d=Math.floor(a.getBoundingClientRect().top-c);return d}catch(h){}}function v(a,f){var c,d,e,b=null,g=0,l=function(){g=new Date;b=null;e=a.apply(c,
d)};return function(){var h=new Date;g||(g=h);var k=f-(h-g);c=this;d=arguments;0>=k?(clearTimeout(b),b=null,g=h,e=a.apply(c,d)):b||(b=setTimeout(l,k));return e}}function n(a,b,c){if(a.addEventListener)a.addEventListener(b,c);else if(a.attachEvent)a.attachEvent("on"+b,function(b){c.call(a,b)});else if("undefined"===typeof a["on"+b]||null===a["on"+b])a["on"+b]=function(b){c.call(a,b)}}var u={};"loading"!==b.readyState?l():b.addEventListener?n(b,"DOMContentLoaded",l):n(g,"load",l)})(document,window,
{forceSyntax:!1,dataLayerName:!1,distances:{percentages:{each:[10,90],every:25},pixels:{each:[],every:null}},top:null,bottom:null,category:"Scroll Tracking",label:document.location.pathname});</script><script type="text/javascript" id="gtm-vimeo-tracking">(function(g,d,k){function m(){var a=n(r("iframe"),t);a.length&&u(function(){h(a,v)})}function t(a){return-1<a.src.indexOf("player.vimeo.com/video/")}function u(a){l(d.Vimeo)?w("https://player.vimeo.com/api/player.js",a):a()}function v(a){if(!a.__vimeoTracked){a.__vimeoTracked=!0;var c=new Vimeo.Player(a),b=k._track.percentages,e={Play:"play",Pause:"pause","Watch to End":"ended"},f={};c.getVideoTitle().then(function(a){h(["Play","Pause","Watch to End"],function(b){if(k.events[b])c.on(e[b],function(){p(b,
a)})});if(b)c.on("timeupdate",function(e){e=e.percent;for(var c in b)e>=b[c]&&!f[c]&&(f[c]=!0,p(c,a))})})}}function x(a){a=y({},{events:{Play:!0,Pause:!0,"Watch to End":!0},percentages:{each:[],every:[]}},a);h(["each","every"],function(b){var c=a.percentages[b];q(c)||(c=[c]);c&&(a.percentages[b]=z(c,Number))});var c=[].concat(a.percentages.each);a.percentages.every&&h(a.percentages.every,function(a){var b=100/a,e=[],d;for(d=1;d<b;d++)e.push(a*d);c=c.concat(n(e,function(a){return 0<a&&100>a}))});var b=
A(c,function(a,b){a[b+"%"]=b/100;return a},{});a._track={percentages:b};return a}function B(a){a=a||{};var c=a.name||"dataLayer",b=a.name||d.GoogleAnalyticsObject||"ga",e="_gaq",f={gtm:function(a,b){g.push({event:"vimeoTrack",attributes:{videoAction:a,videoName:b}})},cl:function(a,b){d[e].push(["_trackEvent","Videos",a,b])},ua:function(a,c){d[b]("send","event","Videos",a,c)}};switch(a.type){case "gtm":var g=d[c]=d[c]||[];break;case "ua":d[b]=d[b]||function(){(d[b].q=d[b].q||[]).push(arguments)};d[b].l=
+new Date;break;case "cl":d[e]=d[e]||[];break;default:l(d[c])?b&&!l(d[b])?a.type="ua":l(d[e])||l(d[e].push)||(a.type="cl"):(a.type="gtm",g=d[c]=d[c]||[])}return f[a.type]}function y(){var a=[].slice.call(arguments),c=a.shift(),b,e;for(e=0;e<a.length;e++){var d=a[e];for(b in d)c[b]=d[b]}return c}function q(a){return Array.isArray_?Array.isArray_(a):"[object Array]"===Object.prototype.toString.call(a)}function h(a,c){if(Array.prototype.forEach_)return a.forEach.call(a,c);var b;for(b=0;b<a.length;b++)c.call(d,
a[b],b,a)}function z(a,c){if(Array.prototype.map_)return a.map.call(a,c);var b=[];h(a,function(a,f,g){b.push(c.call(d,a,f,g))});return b}function n(a,c){if(Array.prototype.filter)return a.filter.call(a,c);var b=[];h(a,function(a,f,g){c.call(d,a,f,g)&&b.push(a)});return b}function A(a,c,b){if(Array.prototype.reduce)return a.reduce.call(a,c,b);var e;for(e=0;e<a.length;e++){var f=a[e];b=c.call(d,b,f,a,e)}return b}function l(a){return"undefined"===typeof a}function r(a){q(a)||(a=[a]);return[].slice.call(g.querySelectorAll(a.join()))}
function w(a,c){function b(){c&&(c(),f.onload=null)}var d=g.getElementsByTagName("script")[0];var f=g.createElement("script");f.onload=b;f.src=a;f.async=!0;d.parentNode.insertBefore(f,d)}if(!navigator.userAgent.match(/MSIE [678]\./gi)){k=x(k);var p=B(k.syntax);"loading"!==g.readyState?m():g.addEventListener("DOMContentLoaded",m);g.addEventListener("load",m,!0)}})(document,window,{events:{Play:!0,Pause:!0,"Watch to End":!0},percentages:{every:25,each:[10,90]}});</script></body></html>
